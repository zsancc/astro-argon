---
import { licenseConfig, profileConfig } from "../../config";
import I18nKey from "../../i18n/i18nKey";
import { i18n } from "../../i18n/translation";
import { formatDateToYYYYMMDD } from "../../utils/date-utils";

interface Props {
	title: string;
	slug: string;
	pubDate: Date;
	class?: string;
}

const { title, pubDate } = Astro.props;
const className = Astro.props.class;
const profileConf = profileConfig;
const licenseConf = licenseConfig;
const postUrl = decodeURIComponent(Astro.url.toString());
---
<div class={`relative transition overflow-hidden rounded-(--radius-large) border border-(--border-divider) bg-(--card-bg) py-4 px-5 ${className ?? ""}`}>
    <div class="absolute left-0 top-4 bottom-4 w-1 rounded-r-full bg-(--primary)/75"></div>
    <div class="pr-0">
    <div class="transition font-bold text-75 text-[1.18rem]/[1.6rem]">
        {title}
    </div>
    <a href={postUrl} class="link text-(--primary) break-all text-[1.03rem]/[1.5rem] inline-block mt-1">
        {postUrl}
    </a>
    <div class="grid grid-cols-1 sm:grid-cols-3 gap-x-6 gap-y-2 mt-3">
        <div>
            <div class="transition text-30 text-sm">{i18n(I18nKey.author)}</div>
            <div class="transition text-75 line-clamp-2">{profileConf.name}</div>
        </div>
        <div>
            <div class="transition text-30 text-sm">{i18n(I18nKey.publishedAt)}</div>
            <div class="transition text-75 line-clamp-2">{formatDateToYYYYMMDD(pubDate)}</div>
        </div>
        <div>
            <div class="transition text-30 text-sm">{i18n(I18nKey.license)}</div>
            <a href={licenseConf.url} target="_blank" rel="noopener noreferrer" class="link text-(--primary) line-clamp-2">{licenseConf.name}</a>
        </div>
        </div>
    </div>
</div>
