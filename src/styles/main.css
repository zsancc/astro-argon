@reference "tailwindcss";

@layer components {
    .surface-card {
        @apply bg-(--card-bg) border border-(--border-divider) transition;
    }
    .surface-card-shadow {
        box-shadow: 0 14px 28px -24px rgba(30, 40, 80, 0.55);
    }
    .surface-card-shadow-strong {
        box-shadow: 0 16px 34px -26px rgba(30, 40, 80, 0.55);
    }
    .widget-title {
        @apply font-bold transition text-[0.92rem] relative ml-8 mt-4 mb-2
        before:w-1 before:h-4 before:rounded-md before:bg-(--primary)
        before:absolute before:left-[-16px] before:top-[5.5px];
    }

    h1, h2, h3, h4, h5, h6, p, a, span, li, ul, ol, blockquote, code, pre, table, th, td, strong {
        @apply transition;
    }
    .link,
    .link-lg {
        @apply relative z-0;
    }
    .link::before,
    .link-lg::before {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: inherit;
        transform: scale(0.85);
        z-index: -10;
        transition: transform 0.15s ease-out, background-color 0.15s ease-out;
    }
    .link:hover::before,
    .link-lg:hover::before {
        transform: scale(1);
        background: var(--surface-muted-hover);
    }
    .link:active,
    .link-lg:active {
        background: none;
    }
    .link:active::before,
    .link-lg:active::before {
        background: var(--surface-muted-active);
    }
    .link {
        @apply transition rounded-md p-1 -m-1;
    }
    .link-lg {
        @apply transition rounded-md p-1.5 -m-1.5;
    }
    .float-panel {
        @apply top-[5.25rem] rounded-(--radius-large) overflow-hidden bg-(--panel-surface) border border-(--border-divider) transition shadow-xl dark:shadow-none
    }
    .float-panel-closed {
        @apply -translate-y-1 opacity-0 pointer-events-none
    }
    .search-panel mark {
        @apply bg-transparent text-(--primary)
    }

    #toc-inner-wrapper {
        mask-image: linear-gradient(to bottom, transparent 0%, black 2rem, black calc(100% - 2rem), transparent 100%);
    }

    .hide-scrollbar {
        scrollbar-width: none;
        -ms-overflow-style: none;
    }
    .hide-scrollbar::-webkit-scrollbar {
        display: none;
    }

    .text-90 {
        color: color-mix(in oklab, var(--color-base-content) 92%, transparent);
    }
    .text-75 {
        color: color-mix(in oklab, var(--color-base-content) 76%, transparent);
    }
    .text-50 {
        color: color-mix(in oklab, var(--color-base-content) 58%, transparent);
    }
    .text-30 {
        color: color-mix(in oklab, var(--color-base-content) 42%, transparent);
    }

    .meta-icon {
        @apply w-8 h-8 transition rounded-md flex items-center justify-center bg-(--surface-soft) border border-(--border-divider)
        text-(--primary) mr-2
    }

    .back-to-top-wrapper {
        @apply hidden lg:block absolute right-0 top-0 w-[3.75rem] h-[3.75rem] pointer-events-none;
    }
    .back-to-top-btn {
        @apply fixed bottom-40 transition overflow-hidden pointer-events-auto;
        transform: translateX(5rem);
    }
    .back-to-top-btn.hide {
        @apply opacity-0 pointer-events-none;
        transform: translateX(5rem) scale(0.9);
    }
    .back-to-top-btn:active {
        transform: translateX(5rem) scale(0.9);
    }

    .layout-html {
        @apply bg-(--page-bg) transition text-[14px] md:text-[16px];
    }
    .layout-body {
        @apply min-h-screen transition;
    }
    .layout-page-height-extend {
        @apply hidden h-[300vh];
    }

    .layout-top-row {
        @apply z-50 pointer-events-none relative transition-all duration-700 max-w-(--page-width) px-0 pt-2.5 mx-auto;
    }
    .layout-navbar-wrapper {
        @apply pointer-events-auto sticky top-0 transition-all;
    }
    .layout-banner-wrapper {
        @apply absolute z-10 w-full transition duration-700 overflow-hidden;
    }
    .layout-banner-image {
        @apply object-cover h-full transition duration-700 opacity-0 scale-105;
    }
    .layout-main-layer {
        @apply absolute w-full z-30 pointer-events-none;
    }
    .layout-main-shell {
        @apply relative max-w-(--page-width) mx-auto pointer-events-auto;
    }
    .layout-main-grid {
        @apply transition duration-700 w-full left-0 right-0 grid grid-cols-[15.75rem_minmax(0,1fr)] grid-rows-[auto_1fr_auto] lg:grid-rows-[auto]
        mx-auto gap-3.5 px-0;
    }
    .layout-banner-credit {
        @apply transition-all absolute flex justify-center items-center rounded-full
        px-3 right-4 -top-[3.25rem] h-9 bg-(--floating-contrast-bg) hover:bg-(--floating-contrast-hover);
    }
    .layout-banner-credit-icon {
        @apply text-(--floating-contrast-fg) text-[1.25rem] mr-1;
    }
    .layout-banner-credit-text {
        @apply text-(--floating-contrast-fg) text-xs;
    }
    .layout-banner-credit-jump {
        @apply transition absolute text-(--primary) right-4 text-[0.75rem] opacity-0;
    }

    .layout-sidebar-col {
        @apply mb-4 row-start-2 row-end-3 col-span-2 lg:row-start-1 lg:row-end-2 lg:col-span-1 lg:max-w-[15.75rem];
    }
    .layout-content-col {
        @apply col-span-2 lg:col-span-1 overflow-hidden;
    }
    .layout-content-wrapper {
        @apply block;
    }
    .layout-footer-desktop {
        @apply col-span-2 hidden lg:block;
    }
    .layout-footer-mobile {
        @apply col-span-2 block lg:hidden;
    }

    .widget-shell {
        @apply bg-(--card-bg) border border-(--border-divider) transition rounded-(--radius-large) overflow-hidden;
        box-shadow: 0 14px 28px -24px rgba(30, 40, 80, 0.55);
    }
    .widget-expand-btn-skin {
        @apply rounded-lg w-full h-9 min-h-9 border-none shadow-none
        text-(--primary) hover:bg-(--surface-muted-hover) active:bg-(--surface-muted-active);
    }
    .widget-expand-inner {
        @apply text-(--primary) flex items-center justify-center gap-2 -translate-x-2;
    }

    .profile-avatar-link {
        @apply block relative mx-auto mt-1 lg:mx-0 lg:mt-0 mb-3
        max-w-[12rem] lg:max-w-none overflow-hidden rounded-2xl active:scale-95;
    }
    .profile-avatar-overlay {
        @apply absolute transition pointer-events-none
        w-full h-full z-50 flex items-center justify-center
        group-hover:bg-(--image-overlay-hover) group-active:bg-(--image-overlay-active);
    }
    .profile-avatar-overlay-icon {
        @apply transition opacity-0 scale-90 group-hover:scale-100 group-hover:opacity-100
        text-(--floating-contrast-fg) text-5xl;
    }
    .profile-name-text {
        @apply font-bold text-[1.38rem]/[1.75rem] text-center mb-1 text-(--primary) transition;
    }
    .profile-bio-text {
        @apply text-center mb-2.5 transition;
        color: color-mix(in oklab, var(--color-base-content) 58%, transparent);
    }
    .profile-social-circle {
        @apply inline-flex items-center justify-center rounded-full h-10 min-h-10 w-10 border-none shadow-none
        bg-(--surface-soft) hover:bg-(--surface-soft-hover) active:bg-(--surface-soft-active)
        text-(--primary) active:scale-90;
    }
    .profile-social-single {
        @apply inline-flex items-center justify-center rounded-lg h-10 min-h-10 gap-2 px-3 font-bold normal-case border-none shadow-none
        bg-(--surface-soft) hover:bg-(--surface-soft-hover) active:bg-(--surface-soft-active)
        text-(--primary) active:scale-95;
    }

    .nav-menu-panel-shell {
        @apply fixed right-4 min-w-52 p-2 shadow-xl;
    }
    .nav-menu-item {
        @apply flex justify-between items-center py-2 pl-3 pr-1 rounded-lg gap-8 font-bold
        text-(--nav-item-fg) hover:text-(--primary)
        hover:bg-(--surface-muted-hover) active:bg-(--surface-muted-active) transition;
    }

    .display-panel-shell {
        @apply absolute w-[22rem] right-4 shadow-xl;
    }
    .display-panel-title {
        @apply flex gap-2 items-center justify-between font-bold text-[0.92rem] transition relative ml-3
        before:w-1 before:h-4 before:rounded-md before:bg-(--primary)
        before:absolute before:-left-3 before:top-[0.33rem];
    }
    .display-panel-reset-btn {
        @apply rounded-md border-none shadow-none
        text-(--primary) hover:bg-(--surface-muted-hover) active:bg-(--surface-muted-active) active:scale-90;
    }
    .display-panel-current-theme {
        @apply border-none transition min-w-[4.5rem] h-7 px-2 justify-center
        font-bold text-xs text-(--primary) bg-(--surface-soft);
    }
    .display-panel-theme-option {
        @apply normal-case justify-start h-10 min-h-10 rounded-lg border-none shadow-none
        hover:bg-(--surface-muted-hover) active:bg-(--surface-muted-active);
    }

    .site-navbar-shell {
        @apply grid grid-cols-[minmax(0,1fr)_auto] items-center
        w-full bg-(--card-bg)/96 backdrop-blur-sm border border-(--border-divider)
        shadow-[0_14px_34px_-25px_rgba(30,40,80,0.65)] transition overflow-visible
        h-[3.75rem] min-h-[3.75rem] rounded-(--radius-large) mx-auto px-3;
    }
    .site-navbar-left {
        @apply min-w-0 flex items-center gap-2;
    }
    .nav-desktop-links {
        @apply hidden md:flex items-center gap-1.5;
    }
    .site-navbar-right {
        @apply flex items-center justify-end flex-nowrap gap-1.5;
    }
    .site-navbar-right > astro-island,
    .site-navbar-right > astro-slot,
    .site-navbar-right > astro-static-slot {
        display: contents;
    }
    .nav-brand-btn {
        @apply inline-flex items-center justify-center rounded-2xl h-10 min-h-10 px-4 text-[1.3rem]/[1.45rem] font-bold normal-case border-none shadow-none
        active:scale-95 bg-transparent hover:bg-(--surface-muted-hover) active:bg-(--surface-muted-active) text-(--primary) hover:text-(--primary);
    }
    .nav-pill-btn {
        @apply inline-flex items-center justify-center rounded-full h-8 min-h-8 px-3.5 text-[0.82rem] font-semibold normal-case border-none shadow-none
        active:scale-95 bg-(--surface-soft)/72 hover:bg-(--surface-soft-hover) active:bg-(--surface-soft-active) text-(--nav-item-fg) hover:text-(--primary);
    }
    .nav-icon-btn {
        @apply inline-flex items-center justify-center rounded-full h-8 min-h-8 w-8 border-none shadow-none active:scale-90
        bg-(--surface-soft)/72 hover:bg-(--surface-soft-hover) active:bg-(--surface-soft-active) text-(--nav-item-fg) hover:text-(--primary);
    }

    .post-card {
        @apply bg-(--card-bg) border border-(--border-divider) transition
        w-full rounded-(--radius-large) overflow-hidden;
        box-shadow: 0 16px 34px -26px rgba(30, 40, 80, 0.55);
    }
    .post-card-with-cover {
        display: grid;
        grid-template-columns: minmax(0, 1fr) 14.5rem;
        align-items: stretch;
    }
    .post-card-with-cover .post-card-cover {
        width: 14.5rem;
        justify-self: end;
    }
    @media (max-width: 40rem) {
        .post-card-with-cover {
            display: flex;
            flex-direction: column;
        }
        .post-card-with-cover .post-card-cover {
            width: auto;
            justify-self: stretch;
        }
    }
    .post-card-body {
        @apply gap-0 p-[1.35rem] md:p-[1.45rem];
    }
    .post-card-body-with-cover {
        @apply md:pr-4;
    }
    .post-card-category {
        @apply border mb-3 px-2.5 h-7 text-[0.8rem] font-semibold transition-colors;
    }
    .post-card-title {
        @apply transition w-full block font-bold mb-2.5 relative text-[1.46rem]/[1.95rem] md:text-[1.62rem]/[2.12rem]
        text-(--primary) hover:text-(--primary)/85 active:text-(--title-active);
    }
    .post-card-title-icon {
        @apply text-(--primary) text-[1.75rem] transition hidden md:inline absolute translate-y-1 opacity-0
        group-hover:opacity-100 -translate-x-1 group-hover:translate-x-0;
    }
    .post-card-excerpt {
        @apply transition mb-3.5 text-[0.97rem]/[1.62rem];
        color: color-mix(in oklab, var(--color-base-content) 58%, transparent);
    }
    .post-card-meta {
        @apply flex flex-wrap items-center gap-2 text-[0.86rem] transition;
        color: color-mix(in oklab, var(--color-base-content) 42%, transparent);
    }
    .post-card-meta-item {
        @apply inline-flex items-center gap-1.5;
    }
    .post-card-meta-sep {
        @apply text-(--border-divider-muted);
    }
    .post-card-cover {
        @apply mx-5 mt-0 mb-5 md:m-5 md:ml-0 rounded-2xl overflow-hidden aspect-16/9 md:aspect-4/3 relative;
    }

    .post-page-shell {
        @apply flex w-full rounded-(--radius-large) overflow-hidden relative mb-4;
    }
    .post-page-card {
        @apply bg-(--card-bg) border border-(--border-divider) transition
        z-10 px-6 md:px-9 pt-6 pb-4 relative w-full;
        box-shadow: 0 16px 34px -26px rgba(30, 40, 80, 0.55);
    }
    .post-page-title-wrap {
        @apply relative;
    }
    .post-page-title {
        @apply transition w-full block font-bold mb-3 text-[2rem]/[2.6rem] md:text-[2.5rem]/[3rem] text-(--primary)
        md:before:w-1 before:h-5 before:rounded-md before:bg-(--primary) before:absolute before:top-[0.75rem] before:left-[-1.125rem];
    }
    .post-page-meta-wrap {
        @apply mb-6;
    }
    .post-page-meta-row {
        @apply flex flex-wrap items-center gap-3 text-sm;
        color: color-mix(in oklab, var(--color-base-content) 58%, transparent);
    }
    .post-page-meta-item {
        @apply inline-flex items-center gap-1.5;
    }
    .post-page-meta-sep {
        @apply text-(--border-divider-muted);
    }
    .post-page-category-badge {
        @apply h-7 px-2.5 border-none bg-(--surface-soft) text-(--accent-content) font-semibold;
    }
    .post-page-divider {
        @apply border-(--border-divider) border-dashed border-b mt-5;
    }
    .post-page-cover {
        @apply mb-8 rounded-xl;
    }
    .post-page-markdown {
        @apply mb-6;
    }
    .post-page-license {
        @apply mb-6 rounded-xl;
    }
    .post-page-nav {
        @apply flex flex-col md:flex-row justify-between mb-4 gap-4 overflow-hidden w-full;
    }
    .post-page-nav-link {
        @apply w-full font-bold overflow-hidden active:scale-95;
    }
    .post-page-nav-btn {
        @apply rounded-2xl w-full h-[3.75rem] min-h-[3.75rem] max-w-full px-4 flex items-center gap-4 border-none shadow-none
        bg-(--card-bg) hover:bg-(--surface-emphasis-hover) active:bg-(--surface-emphasis-active);
    }
    .post-page-nav-prev {
        @apply justify-start;
    }
    .post-page-nav-next {
        @apply justify-end;
    }
    .post-page-nav-title {
        @apply overflow-hidden transition overflow-ellipsis whitespace-nowrap max-w-[calc(100%-3rem)];
        color: color-mix(in oklab, var(--color-base-content) 76%, transparent);
    }
    .post-page-nav-icon {
        @apply text-[2rem] text-(--primary);
    }

    .archive-post-link {
        @apply block h-10 w-full rounded-lg px-0 border-none shadow-none
        bg-transparent transition hover:bg-(--surface-muted-hover) active:bg-(--surface-muted-active);
        color: inherit;
    }
    .archive-post-row {
        @apply flex flex-row items-center justify-start h-full w-full;
    }
    .archive-post-date {
        @apply w-[15%] md:w-[10%] text-sm text-right transition;
        color: color-mix(in oklab, var(--color-base-content) 58%, transparent);
    }
    .archive-post-track {
        @apply w-[15%] md:w-[10%] relative h-full flex items-center;
    }
    .archive-post-dot {
        @apply mx-auto w-1 h-1 rounded transition-all outline z-50
        bg-(--surface-soft-active) outline-(--card-bg)
        group-hover:h-5 group-hover:bg-(--primary)
        group-hover:outline-(--surface-muted-hover)
        group-active:outline-(--surface-muted-active);
    }
    .archive-post-title {
        @apply w-[70%] md:w-[65%] md:max-w-[65%] text-left font-bold pr-8
        whitespace-nowrap overflow-hidden overflow-ellipsis transition-all
        group-hover:translate-x-1 group-hover:text-(--primary);
        color: color-mix(in oklab, var(--color-base-content) 76%, transparent);
    }
    .archive-post-tags {
        @apply hidden md:block md:w-[15%] text-left text-sm transition
        whitespace-nowrap overflow-hidden overflow-ellipsis;
        color: color-mix(in oklab, var(--color-base-content) 42%, transparent);
    }
}

body {
    font-family: "Noto Sans SC", "PingFang SC", "Microsoft YaHei", "Segoe UI", sans-serif;
    background-color: var(--page-bg);
    background-image:
        radial-gradient(1200px 420px at 50% -220px, color-mix(in oklab, var(--primary) 14%, transparent), transparent 65%),
        linear-gradient(var(--page-bg), var(--page-bg));
}

.custom-md img, #post-cover img {
    @apply cursor-zoom-in
}

::selection {
    background-color: var(--selection-bg)
}

.dash-line {
    position: relative;
}

.dash-line::before {
    content: "";
    position: absolute;
    width: 10%;
    height: 100%;
    left: calc(50% - 1px);
    border-left: 2px dashed var(--line-color);
    pointer-events: none;
    transition: all 0.3s;
    transform: translateY(-50%);
}

.custom-md spoiler {
    @apply bg-(--codeblock-bg) hover:bg-transparent px-1 py-0.5 overflow-hidden rounded-md transition-all duration-150;
}

.custom-md spoiler:not(:hover),
.custom-md spoiler:not(:hover) * {
    color: var(--codeblock-bg);
}

